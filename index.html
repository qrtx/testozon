<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Учет смен — Liquid Glass</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: { extend: {
        colors: { brand: {500:'#2b85ff'}, accent:{500:'#ff4dc7'} },
        fontFamily: { sans: ['Inter','ui-sans-serif','system-ui','Segoe UI','Roboto','Arial'] }
      }}
    }
  </script>
  <style>
    :root {
      --glass-bg: rgba(255,255,255,0.32);
      --glass-bg-strong: rgba(255,255,255,0.42);
      --glass-stroke: rgba(255,255,255,0.55);
      --glass-stroke-outer: rgba(0,0,0,0.06);
      --glass-shadow: 0 10px 30px rgba(16,24,40,.06), 0 2px 8px rgba(16,24,40,.04);
      --glass-inset: inset 0 1px 0 rgba(255,255,255,0.42);
      --glass-highlight: linear-gradient(180deg, rgba(255,255,255,.5), rgba(255,255,255,.12) 46%, rgba(255,255,255,0) 60%);
    }
    body { background: linear-gradient(180deg, #f6fbff, #ffffff 40%, #eef6ff); }
    .bg-blobs{ position:fixed; inset:0; pointer-events:none; z-index:-1; overflow:hidden; }
    .blob{ position:absolute; border-radius:9999px; filter:blur(80px) saturate(120%); opacity:.45; will-change:transform; }
    .blob.a{ width:720px;height:520px;left:-140px;top:-100px;
      background: radial-gradient(60% 60% at 40% 40%, rgba(43,133,255,.35), rgba(255,255,255,0) 70%),
                  radial-gradient(60% 60% at 70% 60%, rgba(255,77,199,.28), rgba(255,255,255,0) 75%);
      animation:a 55s ease-in-out infinite alternate; }
    .blob.b{ width:820px;height:620px;right:-220px;bottom:-220px;
      background: radial-gradient(60% 60% at 60% 40%, rgba(139,193,255,.28), rgba(255,255,255,0) 70%),
                  radial-gradient(60% 60% at 30% 70%, rgba(255,77,199,.22), rgba(255,255,255,0) 75%);
      animation:b 65s ease-in-out infinite alternate; }
    @keyframes a{0%{transform:translate3d(0,0,0) scale(1)}100%{transform:translate3d(30px,20px,0) scale(1.06)}}
    @keyframes b{0%{transform:translate3d(0,0,0) scale(1)}100%{transform:translate3d(-25px,-15px,0) scale(1.05)}}
    .glass{ background:var(--glass-bg); backdrop-filter:blur(24px) saturate(170%); -webkit-backdrop-filter:blur(24px) saturate(170%);
      border-radius:24px; box-shadow:var(--glass-shadow), var(--glass-inset); position:relative; overflow:hidden; }
    .glass:before{ content:""; position:absolute; inset:0; border-radius:inherit; pointer-events:none; background:var(--glass-highlight); }
    .glass:after{ content:""; position:absolute; inset:0; border-radius:inherit; pointer-events:none;
      box-shadow:0 0 0 1px var(--glass-stroke-outer), inset 0 0 0 1px var(--glass-stroke); }
    .glass-ink{ background:var(--glass-bg-strong); backdrop-filter:blur(22px) saturate(170%); -webkit-backdrop-filter:blur(22px) saturate(170%);
      border-radius:18px; box-shadow:var(--glass-shadow), var(--glass-inset); position:relative; }
    .glass-ink:after{ content:""; position:absolute; inset:0; border-radius:inherit; pointer-events:none;
      box-shadow:0 0 0 1px var(--glass-stroke-outer), inset 0 0 0 1px var(--glass-stroke); }
    .view-enter{opacity:0; transform:translateY(6px) scale(.985)}
    .view-enter-active{transition:opacity .22s ease, transform .22s ease; opacity:1; transform:translateY(0) scale(1)}
    .view-leave{opacity:1; transform:translateY(0) scale(1)}
    .view-leave-active{transition:opacity .18s ease, transform .18s ease; opacity:0; transform:translateY(6px) scale(.985)}
    .no-scrollbar::-webkit-scrollbar{display:none}
    .no-scrollbar{-ms-overflow-style:none;scrollbar-width:none}
  </style>
</head>
<body class="font-sans text-gray-900 min-h-screen">
  <div class="bg-blobs">
    <div class="blob a"></div>
    <div class="blob b"></div>
  </div>

  <div class="mx-auto max-w-screen-md px-4 pb-28 pt-4">
    <header class="glass p-4 sm:p-5 mb-6 flex items-center justify-between">
      <div class="flex items-center gap-3 sm:gap-4">
        <div class="h-12 w-12 rounded-2xl bg-gradient-to-br from-brand-500 to-accent-500 flex items-center justify-center text-white font-bold select-none">УС</div>
        <div>
          <h1 class="text-xl font-semibold">Учет смен</h1>
          <p class="text-sm text-gray-600">Liquid Glass · минимализм</p>
        </div>
      </div>
      <button id="btn-login" class="glass-ink px-3 py-2 rounded-xl text-sm font-medium">Войти</button>
    </header>

    <main id="views" class="space-y-4">
      <section id="view-checkin" class="glass p-4 sm:p-5">
        <header class="mb-3 flex items-center justify-between">
          <h2 class="text-base sm:text-lg font-semibold">Отметиться</h2>
          <span class="text-xs text-gray-600">#checkin</span>
        </header>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4">
          <div class="space-y-2">
            <label class="text-sm text-gray-700">Сотрудник</label>
            <select id="employeeSelect" class="w-full glass-ink rounded-xl px-3 py-3 outline-none focus:ring-2 focus:ring-brand-500">
              <option value="">Выберите имя</option>
              <option>Сергей З.</option><option>Сергей Ш.</option><option>Арина</option><option>Андрей</option>
              <option>Валера</option><option>Даша</option><option>Ростислав</option><option>Алексей</option><option>Саня</option>
            </select>
          </div>
          <div class="space-y-2">
            <label class="text-sm text-gray-700">ПВЗ</label>
            <select id="pointSelect" class="w-full glass-ink rounded-xl px-3 py-3 outline-none focus:ring-2 focus:ring-brand-500">
              <option value="">Выберите пункт</option>
              <option>МО_ХИМКИ_89</option><option>ХИМКИ_241</option>
            </select>
          </div>
          <div class="sm:col-span-2 flex gap-3 pt-1">
            <button id="markShiftBtn" class="glass-ink px-4 py-3 rounded-xl font-semibold flex-1">Отметиться</button>
            <button id="cancelCheckinBtn" class="glass-ink px-4 py-3 rounded-xl font-medium">Отмена</button>
          </div>
          <p id="checkinStatus" class="sm:col-span-2 text-sm text-gray-600"></p>
        </div>
      </section>

      <section id="view-calendar" class="glass p-4 sm:p-5 hidden">
        <header class="mb-3 flex items-center justify-between">
          <h2 class="text-base sm:text-lg font-semibold">Календарь</h2>
          <span class="text-xs text-gray-600">#calendar</span>
        </header>
        <div id="calendarContainer" class="h-[420px] sm:h-[520px] w-full rounded-xl glass-ink overflow-hidden no-scrollbar flex items-center justify-center">
          <div class="text-center text-sm text-gray-600 p-6">Здесь рендерится календарь (встраиваемый как в твоём бэке).</div>
        </div>
      </section>

      <section id="view-payroll" class="glass p-4 sm:p-5 hidden">
        <header class="mb-3 flex items-center justify-between">
          <h2 class="text-base sm:text-lg font-semibold">Зарплаты</h2>
          <span class="text-xs text-gray-600">#payroll</span>
        </header>
        <div class="space-y-3">
          <div class="grid grid-cols-2 sm:grid-cols-4 gap-3">
            <div class="glass-ink rounded-xl p-3"><div class="text-xs text-gray-600">Период</div><div id="periodLabel" class="text-base font-semibold">11–25</div></div>
            <div class="glass-ink rounded-xl p-3"><div class="text-xs text-gray-600">Смен</div><div id="shiftsCount" class="text-base font-semibold">—</div></div>
            <div class="glass-ink rounded-xl p-3"><div class="text-xs text-gray-600">Ставка</div><div id="rate" class="text-base font-semibold">— ₽</div></div>
            <div class="glass-ink rounded-xl p-3"><div class="text-xs text-gray-600">Итого</div><div id="total" class="text-base font-semibold">— ₽</div></div>
          </div>
          <div id="payrollTable" class="glass-ink rounded-xl p-2 overflow-x-auto no-scrollbar">
            <table class="w-full min-w-[560px] text-sm">
              <thead><tr class="text-left"><th class="py-2 px-3 font-semibold">Сотрудник</th><th class="py-2 px-3 font-semibold">Смен</th><th class="py-2 px-3 font-semibold">Ставка</th><th class="py-2 px-3 font-semibold">Сумма</th></tr></thead>
              <tbody id="payrollBody"><tr class="border-t border-white/40"><td class="py-2 px-3">Пример</td><td class="py-2 px-3">—</td><td class="py-2 px-3">—</td><td class="py-2 px-3">—</td></tr></tbody>
            </table>
          </div>
        </div>
      </section>

      <section id="view-requisites" class="glass p-4 sm:p-5 hidden">
        <header class="mb-3 flex items-center justify-between">
          <h2 class="text-base sm:text-lg font-semibold">Реквизиты для выплаты</h2>
          <span class="text-xs text-gray-600">#requisites</span>
        </header>
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-3">
          <div class="space-y-2">
            <label class="text-sm text-gray-700">Сотрудник</label>
            <select id="reqEmployee" class="glass-ink rounded-xl px-3 py-3 w-full focus:ring-2 focus:ring-brand-500">
              <option value="">Выберите имя</option>
            </select>
          </div>
          <div class="space-y-2">
            <label class="text-sm text-gray-700">Телефон</label>
            <input id="reqPhone" type="tel" placeholder="+79999999999" class="glass-ink rounded-xl px-3 py-3 w-full focus:ring-2 focus:ring-brand-500" />
          </div>
          <div class="space-y-2">
            <label class="text-sm text-gray-700">Банк</label>
            <input id="reqBank" type="text" placeholder="Альфа" class="glass-ink rounded-xl px-3 py-3 w-full focus:ring-2 focus:ring-brand-500" />
          </div>
          <div class="sm:col-span-3 flex gap-3 pt-1">
            <button id="saveReqBtn" class="glass-ink rounded-xl px-4 py-3 font-semibold flex-1">Сохранить</button>
            <button id="clearReqBtn" class="glass-ink rounded-xl px-4 py-3 font-medium">Очистить</button>
          </div>
        </div>
        <div id="reqList" class="mt-4 glass-ink rounded-xl p-2 overflow-x-auto no-scrollbar">
          <table class="w-full min-w-[560px] text-sm">
            <thead><tr class="text-left"><th class="py-2 px-3 font-semibold">Сотрудник</th><th class="py-2 px-3 font-semibold">Реквизиты</th><th class="py-2 px-3 font-semibold w-24">Действия</th></tr></thead>
            <tbody id="reqBody"></tbody>
          </table>
        </div>
      </section>

      <section id="view-rules" class="glass p-4 sm:p-5 hidden">
        <header class="mb-3 flex items-center justify-between">
          <h2 class="text-base sm:text-lg font-semibold">Правила ПВЗ</h2>
          <span class="text-xs text-gray-600">#rules</span>
        </header>
        <div id="rulesContent" class="prose prose-sm max-w-none text-gray-800">
          <p>Полные тексты правил будут загружаться из БД и адаптироваться под экран.</p>
        </div>
      </section>

      <section id="view-contacts" class="glass p-4 sm:p-5 hidden">
        <header class="mb-3 flex items-center justify-between">
          <h2 class="text-base sm:text-lg font-semibold">Контакты админов</h2>
          <span class="text-xs text-gray-600">#contacts</span>
        </header>
        <ul id="adminsList" class="grid grid-cols-1 sm:grid-cols-2 gap-3">
          <li class="glass-ink rounded-xl p-3"><div class="text-sm font-semibold">Андрей</div><div class="text-xs text-gray-600">@andrey • +7 900 000‑00‑00</div></li>
        </ul>
      </section>

      <section id="view-admin" class="glass p-4 sm:p-5 hidden">
        <header class="mb-3 flex items-center justify-between">
          <h2 class="text-base sm:text-lg font-semibold">Админ‑панель</h2>
          <button id="logoutBtn" class="glass-ink rounded-xl px-3 py-2 text-sm font-medium">Выйти</button>
        </header>
        <div class="text-sm text-gray-700">Действия по сотрудникам, пунктам, ставкам — скрыто до входа.</div>
      </section>
    </main>
  </div>

  <nav class="fixed bottom-3 left-0 right-0 mx-auto max-w-screen-md px-4">
    <div class="glass rounded-3xl px-2 py-1">
      <ul class="grid grid-cols-5 gap-1">
        <li><button data-tab="checkin" class="tab-btn glass-ink rounded-2xl px-2 py-2 text-xs font-semibold w-full">Отметка</button></li>
        <li><button data-tab="calendar" class="tab-btn glass-ink rounded-2xl px-2 py-2 text-xs font-semibold w-full">Календарь</button></li>
        <li><button data-tab="payroll" class="tab-btn glass-ink rounded-2xl px-2 py-2 text-xs font-semibold w-full">Зарплаты</button></li>
        <li><button data-tab="requisites" class="tab-btn glass-ink rounded-2xl px-2 py-2 text-xs font-semibold w-full">Реквизиты</button></li>
        <li><button data-tab="contacts" class="tab-btn glass-ink rounded-2xl px-2 py-2 text-xs font-semibold w-full">Контакты</button></li>
      </ul>
    </div>
  </nav>

  <script>
    if (!window.__oz_liquid_init__) {
      window.__oz_liquid_init__ = true;
      (function(){
        const tabs = ['checkin','calendar','payroll','requisites','rules','contacts','admin'];
        const byId = id => document.getElementById(id);

        function animateShow(sec){
          sec.classList.remove('hidden');
          sec.classList.add('view-enter');
          requestAnimationFrame(()=>{
            sec.classList.add('view-enter-active');
            sec.addEventListener('transitionend', ()=>{
              sec.classList.remove('view-enter','view-enter-active');
            }, {once:true});
          });
        }
        function animateHide(sec){
          sec.classList.add('view-leave');
          requestAnimationFrame(()=>{
            sec.classList.add('view-leave-active');
            sec.addEventListener('transitionend', ()=>{
              sec.classList.remove('view-leave','view-leave-active');
              sec.classList.add('hidden');
            }, {once:true});
          });
        }

        let current = localStorage.getItem('activeTab') || 'checkin';
        document.querySelectorAll('[id^="view-"]').forEach(sec=>sec.classList.add('hidden'));
        byId('view-'+current)?.classList.remove('hidden');

        document.querySelectorAll('.tab-btn').forEach(btn => btn.addEventListener('click', () => {
          const tab = btn.dataset.tab;
          if (tab === current) return;
          const prev = byId('view-'+current);
          const next = byId('view-'+tab);
          if (prev) animateHide(prev);
          if (next) animateShow(next);
          document.querySelectorAll('.tab-btn').forEach(b => {
            const act = b.dataset.tab===tab;
            b.classList.toggle('ring-2', act);
            b.classList.toggle('ring-brand-500', act);
          });
          localStorage.setItem('activeTab', tab);
          current = tab;
        }));

        // Hooks for integration
        window.fillEmployees = function(list){
          const sel1 = byId('employeeSelect');
          const sel2 = byId('reqEmployee');
          if (!sel1 || !sel2) return;
          sel1.replaceChildren(new Option('Выберите имя',''));
          sel2.replaceChildren(new Option('Выберите имя',''));
          list.forEach(n => { sel1.add(new Option(n,n)); sel2.add(new Option(n,n)); });
        }
        window.fillPoints = function(list){
          const sel = byId('pointSelect'); if(!sel) return;
          sel.replaceChildren(new Option('Выберите пункт',''));
          list.forEach(p => sel.add(new Option(p,p)));
        }
        window.renderCalendar = function(html){ const c = byId('calendarContainer'); if (c) c.innerHTML = html; }
        window.renderPayroll = function(rows){
          const body = byId('payrollBody'); if(!body) return; body.innerHTML='';
          rows.forEach(r => {
            const tr = document.createElement('tr'); tr.className='border-t border-white/40';
            tr.innerHTML = '<td class="py-2 px-3">'+r.name+'</td><td class="py-2 px-3">'+r.count+'</td><td class="py-2 px-3">'+r.rate+'</td><td class="py-2 px-3">'+r.total+'</td>';
            body.appendChild(tr);
          });
        }
        window.renderRules = function(html){ const r = byId('rulesContent'); if(r) r.innerHTML = html; }
        window.renderAdmins = function(list){
          const ul = document.getElementById('adminsList'); if(!ul) return; ul.innerHTML='';
          list.forEach(a=>{
            const li = document.createElement('li'); li.className='glass-ink rounded-xl p-3';
            li.innerHTML = "<div class='text-sm font-semibold'>"+a.name+"</div><div class='text-xs text-gray-600'>"+(a.handle||'')+" "+(a.phone||'')+"</div>";
            ul.appendChild(li);
          });
        }
        window.addRequisiteRow = function(name, phone, bank, id){
          const body = byId('reqBody'); if(!body) return;
          const tr = document.createElement('tr'); tr.dataset.id = id || '';
          tr.innerHTML = "<td class='py-2 px-3'>"+name+"</td><td class='py-2 px-3'>"+phone+" — "+bank+"</td><td class='py-2 px-3'><button class='glass-ink rounded-lg px-2 py-1 text-xs' onclick='window.deleteReqRow(""+(id||'')+"")'>Удалить</button></td>";
          body.appendChild(tr);
        }
        window.deleteReqRow = function(id){ const row = document.querySelector("#reqBody tr[data-id='"+id+"']"); if(row) row.remove(); }
        window.setAdminMode = function(enabled){ const sec = byId('view-admin'); if (sec) sec.classList.toggle('hidden', !enabled); }

        byId('markShiftBtn')?.addEventListener('click', () => {
          const name = byId('employeeSelect')?.value || '—';
          const point = byId('pointSelect')?.value || '—';
          const el = byId('checkinStatus'); if (el) el.textContent = 'Отмечено: '+name+' @ '+point+' • '+new Date().toLocaleString('ru-RU');
        });
      })();
    }
  </script>
</body>
</html>
